(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{11:function(e,t,s){e.exports={enrollContainer:"enroll_enrollContainer__1a9dx",subjectBox:"enroll_subjectBox__3_t28",titleBox:"enroll_titleBox__1y6yr",subTitle:"enroll_subTitle___BTJA",discriptionBox:"enroll_discriptionBox__3pL1q",postBox:"enroll_postBox__2gorZ",btnBox:"enroll_btnBox__37xN0"}},14:function(e,t,s){e.exports={navbarContainer:"navbar_navbarContainer__KEhRf",navbarTitle:"navbar_navbarTitle__2EVqJ",btnBox:"navbar_btnBox__13yFq"}},17:function(e,t,s){e.exports={classListContainer:"classList_classListContainer__1la2P",classListBox:"classList_classListBox__2S1z0",btnBox:"classList_btnBox__1ylSb"}},18:function(e,t,s){e.exports={contentBox:"subject_contentBox__1_y3U",titleBox:"subject_titleBox___GfjI",subtitleBox:"subject_subtitleBox__3qcSz"}},24:function(e,t,s){e.exports={mainContainer:"home_mainContainer__2Z7uj"}},35:function(e,t,s){},36:function(e,t,s){},48:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),c=s(27),i=s.n(c),r=(s(35),s(7)),l=(s(36),s(1)),o=function(e){var t=e.firebase;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"\ub85c\uadf8\uc778 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4."}),Object(l.jsx)("button",{typte:"button",onClick:function(e){t.googleLogin()},children:"gogleLogin"})]})},b=s(5),u=s(14),j=s.n(u),x=function(e){var t=e.title,s=e.firebase,n=e.user,c=Object(b.f)(),i=Object(a.useRef)(),r=Object(a.useRef)();Object(a.useEffect)((function(){return n?void(r.current.style.visibility="visible"):void(r.current.style.visibility="hidden")}),[n]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("section",{className:j.a.navbarContainer,ref:i,style:{position:"fixed"},children:[Object(l.jsx)("span",{className:j.a.btnBox,children:Object(l.jsx)("button",{onClick:function(){c.push("/class-list")},className:j.a.backPageBtn,children:" \ub4a4\ub85c "})}),Object(l.jsx)("h1",{className:j.a.navbarTitle,children:t}),Object(l.jsx)("span",{className:j.a.btnBox,children:Object(l.jsx)("button",{className:j.a.logoutBtn,onClick:function(){s.googleLogout().then((function(){alert("\ub85c\uadf8\uc544\uc6c3 \ub418\uc5c8\uc2b5\ub2c8\ub2e4")}))},ref:r,children:"Logout"})})]})})},f=s(24),h=s.n(f),d=function(e){var t=e.firebase,s=function(e){var s=t.setDatabaseRef("user").child(e);t.onDatabase(s).then((function(t){t.exists()||a(e)}))},a=function(e){var s=t.setDatabaseRef("user").child(e);t.setDatabase(s,{enroll_chance:2}).then((function(e){return console.log(e)}))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsxs)("section",{className:h.a.mainContainer,children:[Object(l.jsx)("h1",{children:"\uccad\uc8fc\uc9c0\uad6c \uc120\ud0dd\ud2b9\uac15\uc5d0 \uc624\uc2e0 \uc5ec\ub7ec\ubd84\uc744 \ud658\uc601\ud569\ub2c8\ub2e4."}),Object(l.jsx)("div",{className:h.a.loginBox,children:Object(l.jsx)("h2",{children:"\uc544\ub798\uc758 \ubc84\ud2bc\uc744 \ud1b5\ud574\uc11c \ub85c\uadf8\uc778\uc744 \ud574\uc57c\ud569\ub2c8\ub2e4."})}),Object(l.jsx)("button",{onClick:function(){t.googleLogin().then((function(e){s(e.user.uid)}))},children:"\uad6c\uae00\ub85c \ub85c\uadf8\uc778 \ud558\uae30"})]})]})},O=s(11),p=s.n(O),m=function(e){var t=e.firebase,s=e.user,n=e.path,c=e.post,i=e.member,o=e.maxMember,b=Object(a.useState)(""),u=Object(r.a)(b,2),j=u[0],x=u[1],f=Object(a.useState)(""),h=Object(r.a)(f,2),d=h[0],O=h[1];Object(a.useEffect)((function(){if(n){var e=t.setDatabaseRef("subject").child(n).child("member").child(s);t.onDatabase(e).then((function(e){e.exists()?x(!0):x(!1)}));var a=t.setDatabaseRef("user").child(s);t.onDatabase(a).then((function(e){var t=e.val().enroll_chance;O(t)}))}}),[j,t,s,n,c]);var m=Object(a.useRef)(),v=Object(a.useRef)(),_=Object(a.useRef)(),B=function(e,a,c){var r={userName:e,campus:a,year:c};if(!j&&d>0&&i<o){var l=t.setDatabaseRef("subject").child(n).child("member").child(s);t.setDatabase(l,r).then((function(e){alert(e),x(!0),N(),g(!0)}))}else d<=0?alert("\ub354 \uc774\uc0c1 \ub4f1\ub85d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):i>=o?alert("\uc815\uc6d0\uc774 \ub2e4 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"):alert("\uc774\ubbf8 \ub4f1\ub85d\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.")},g=function(e){var a=t.setDatabaseRef("user").child(s);if(e){var n={enroll_chance:d-1};t.updateDatabase(a,n)}else{var c={enroll_chance:d+1};t.updateDatabase(a,c)}},N=function(){c()};return Object(l.jsxs)("div",{className:p.a.postBox,children:[Object(l.jsxs)("label",{children:["\uc774 \u2003 \ub984 : \u2002",Object(l.jsx)("input",{type:"text",ref:m,placeholder:"ex)\ud64d\uae38\ub3d9"})]}),Object(l.jsxs)("label",{children:["\ucea0 \ud37c \uc2a4 : \u2002",Object(l.jsx)("input",{type:"text",ref:v,placeholder:"ex)00\ub300\ud559\uad50"})]}),Object(l.jsxs)("label",{children:["\ud559 \u2003 \ubc88 : \u2002",Object(l.jsx)("input",{type:"text",ref:_,placeholder:"ex)21\ud559\ubc88"})]}),Object(l.jsxs)("div",{className:p.a.btnBox,children:[Object(l.jsx)("button",{onClick:function(){var e=m.current.value,t=v.current.value,s=_.current.value;e&&t&&s?B(e,t,s):alert("\uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")},children:"\ub4f1\ub85d\ud558\uae30"}),Object(l.jsx)("button",{onClick:function(){if(j){var e=t.setDatabaseRef("subject").child(n).child("member").child(s);t.removeDatabase(e).then((function(e){alert(e),x(!1),N(),g(!1)}))}else alert("\ub4f1\ub85d\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")},children:"\ucde8\uc18c\ud558\uae30"})]})]})},v=function(e){var t=e.firebase,s=e.user,n=e.path,c=e.item,i=Object(a.useState)("0"),o=Object(r.a)(i,2),b=o[0],u=o[1],j=Object(a.useState)(!1),f=Object(r.a)(j,2),h=f[0],d=f[1];Object(a.useEffect)((function(){if(n){var e=t.setDatabaseRef("subject").child(n).child("member");t.onDatabase(e).then((function(e){e.exists()||u(0),u(e.numChildren())}))}}),[t,h,n]);return Object(l.jsxs)("section",{className:p.a.enrollContainer,children:[Object(l.jsx)(x,{firebase:t,user:s,title:c.title}),Object(l.jsxs)("div",{className:p.a.subjectBox,children:[Object(l.jsx)("div",{className:p.a.titleBox,children:Object(l.jsxs)("h1",{children:["\uac15\uc758\uba85 : ",c.title]})}),Object(l.jsxs)("div",{className:p.a.subTitle,children:[Object(l.jsxs)("h2",{children:["\uac15\uc0ac : ",c.speaker]}),Object(l.jsxs)("h2",{children:["\uc815\uc6d0 : ",b,"/",c.maxMember]})]}),Object(l.jsx)("div",{className:p.a.discriptionBox,children:Object(l.jsx)("h2",{children:c.discription})}),Object(l.jsx)(m,{firebase:t,user:s,path:n,post:function(){h||d(!0),d(!1)},member:b,maxMember:c.maxMember})]})]})},_=s(9),B=s.n(_),g=function(e){var t=e.firebase,s=e.user,n=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),r=Object(a.useRef)(),o=Object(b.f)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{title:"\uac15\uc758\ub4f1\ub85d",firebase:t,user:s}),Object(l.jsx)("div",{className:B.a.postBox,children:Object(l.jsxs)("ol",{children:[Object(l.jsx)("li",{className:B.a.inputList,children:Object(l.jsxs)("label",{children:["\uc81c\ubaa9",Object(l.jsx)("input",{className:B.a.input,name:"\uc81c\ubaa9",ref:n,type:"text"})]})}),Object(l.jsx)("li",{className:B.a.inputList,children:Object(l.jsxs)("label",{children:["\uac15\uc0ac",Object(l.jsx)("input",{className:B.a.input,name:"\uc81c\ubaa9",ref:c,type:"text"})]})}),Object(l.jsx)("li",{className:B.a.inputList,children:Object(l.jsxs)("label",{className:B.a.labels,children:["\uc124\uba85",Object(l.jsx)("textarea",{className:B.a.textarea,name:"\uc124\uba85",ref:i,cols:"30",rows:"10"})]})}),Object(l.jsx)("li",{className:B.a.inputList,children:Object(l.jsxs)("label",{children:["\uc815\uc6d0",Object(l.jsx)("input",{className:B.a.input,name:"\uc815\uc6d0",ref:r})]})})]})}),Object(l.jsxs)("div",{className:B.a.btnBox,children:[Object(l.jsx)("button",{onClick:function(){var e=n.current.value,s=c.current.value,a=i.current.value,l=r.current.value;t.subjectWriteData(e,s,a,l).then((function(e){alert(e),o.push("/class-list")}))},children:"\uc800\uc7a5"}),Object(l.jsx)("button",{onClick:function(){o.goBack()},children:"\ucde8\uc18c"})]})]})},N=s(18),y=s.n(N),k=function(e){var t=e.item,s=e.path,a=e.enroll,n=t.title,c=t.speaker,i=t.discription,r=t.maxMember,o="";t.member?o=Object.keys(t.member).length:o=0;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("li",{className:y.a.contentBox,onClick:function(){a(s,t)},children:[Object(l.jsx)("div",{className:y.a.titleBox,children:Object(l.jsxs)("h2",{children:["\uac15\uc758\uba85 : ",n]})}),Object(l.jsxs)("div",{className:y.a.subtitleBox,children:[Object(l.jsxs)("span",{children:["\uac15\uc0ac : ",c]}),Object(l.jsxs)("span",{children:["\uc815\uc6d0 : ",o,"/",r]})]}),Object(l.jsx)("div",{children:i})]})})},D=s(17),L=s.n(D),C=function(e){var t=e.firebase,s=e.user,n=e.enroll,c=Object(a.useState)(""),i=Object(r.a)(c,2),o=i[0],u=i[1],j=Object(b.f)();Object(a.useEffect)((function(){var e=t.setDatabaseRef("subject");t.onDatabase(e).then((function(e){var t=e.val();t&&u(Object.entries(t))}))}),[t]);var f=function(e,t){n(e,t,o)};return Object(l.jsxs)("section",{className:L.a.classListContainer,children:[Object(l.jsx)(x,{title:"\uc120\ud0dd\ud2b9\uac15 \ub9ac\uc2a4\ud2b8",firebase:t,user:s}),Object(l.jsx)("ul",{className:L.a.classListBox,children:o&&o.map((function(e){return Object(l.jsx)(k,{item:e[1],path:e[0],enroll:f},e[0])}))}),Object(l.jsx)("div",{className:L.a.btnBox,children:Object(l.jsx)("button",{className:L.a.subjectRegiste,onClick:function(){j.push("/post")},children:"\uac15\uc758 \ub4f1\ub85d\ud558\uae30"})})]})};var R=function(e){var t=e.firebase,s=Object(b.f)(),n=Object(a.useState)(""),c=Object(r.a)(n,2),i=c[0],u=c[1],j=Object(a.useState)(!1),x=Object(r.a)(j,2),f=x[0],h=x[1],O=Object(a.useState)(""),p=Object(r.a)(O,2),m=p[0],_=p[1];return Object(a.useEffect)((function(){t.authObserver((function(e){e?(u(e.uid),s.push("/class-List")):s.push("/")}))}),[t,s]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(b.c,{children:[Object(l.jsx)(b.a,{path:"/sign-In",children:Object(l.jsx)(o,{firebase:t})}),Object(l.jsx)(b.a,{path:"/post",children:Object(l.jsx)(g,{firebase:t,user:i})}),Object(l.jsx)(b.a,{path:"/enroll",children:Object(l.jsx)(v,{firebase:t,user:i,path:f,item:m})}),Object(l.jsx)(b.a,{path:"/class-List",children:Object(l.jsx)(C,{firebase:t,user:i,enroll:function(e,t){h(e),_(t),s.push("/enroll")}})}),Object(l.jsx)(b.a,{path:"/",exact:!0,children:Object(l.jsx)(d,{firebase:t})})]})})},S=s(29),w=s(30),I=s(12),E=(s(42),s(44),function(){function e(){Object(S.a)(this,e)}return Object(w.a)(e,[{key:"firebaseInit",value:function(){I.a.initializeApp({apiKey:"AIzaSyBy2SjWYbzsQBa9qcLdA9lfd7XigPTjOQI",authDomain:"select-class.firebaseapp.com",projectId:"select-class",appId:"1:607003455175:web:0c54994ca8d9be864098e2",measurementId:"G-ZJXKWSGYE2",databaseURL:"https://select-class-default-rtdb.firebaseio.com",storageBucket:"select-class.appspot.com"})}},{key:"googleLogin",value:function(){var e=new I.a.auth.GoogleAuthProvider;return I.a.auth().signInWithPopup(e)}},{key:"googleLogout",value:function(){return I.a.auth().signOut()}},{key:"authObserver",value:function(e){return I.a.auth().onAuthStateChanged(e)}},{key:"setDatabaseRef",value:function(e){return I.a.database().ref(e)}},{key:"setDatabase",value:function(e,t){return new Promise((function(s,a){e.set(t),s("\uc800\uc7a5\uc644\ub8cc")}))}},{key:"removeDatabase",value:function(e){return new Promise((function(t,s){e.remove(),t("\uac15\uc758\uac00 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4")}))}},{key:"onDatabase",value:function(e){return new Promise((function(t,s){e.on("value",(function(e){t(e)}))}))}},{key:"updateDatabase",value:function(e,t){return new Promise((function(s,a){s(e.update(t))}))}},{key:"subjectWriteData",value:function(e,t,s,a){var n=I.a.database().ref("subject");return new Promise((function(c,i){n.push().set({title:e,speaker:t,discription:s,maxMember:Number(a),member:0}),c("\uac15\uc758\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4")}))}}]),e}()),P=s(15),M=new E;M.firebaseInit(),i.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(P.a,{children:Object(l.jsx)(R,{firebase:M})})}),document.getElementById("root"))},9:function(e,t,s){e.exports={postBox:"post_postBox__3e93n",labels:"post_labels__2ZgcX",inputList:"post_inputList__eliQM",input:"post_input__E-2Ya",textarea:"post_textarea__3Regc",btnBox:"post_btnBox__2sQW5"}}},[[48,1,2]]]);
//# sourceMappingURL=main.f963729b.chunk.js.map